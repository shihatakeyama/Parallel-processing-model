Parallel-processing-model

マルチスレッドによる並列処理のモデル設計

ネット上に、処理する数だけ(～数1000)スレッドを生成して並列処理するソースコードを見かけますが、
スレッド起動に結構オーバヘッドがかかるので、かえってシングルスレッドで処理した方が間早かったりします。
この改善策として、実行中のスレッド数をCPUコア数と等しくなるようにうまくコントロールしているソースコードを見かけます。

本リポジトリにある処理はCPUの数だけスレッドを起動して、スレッドの中で処理番号を取得、全ての処理が終了するまで繰り返すようにした。
処理番号を割り当てるクラス NumberAllocation を作成しました。クラス外から番号を取得と同時にインクリメントします。
この処理は処理する前に処理するデータ数が決まっている場合に有用であると思います。

提示のソースコードは、ラムダ式の中で処理番号を取得、処理する内容を決定してから望みの処理を呼ぶようにしてあります。

VS2013でワークスぺスを作成してあります。


